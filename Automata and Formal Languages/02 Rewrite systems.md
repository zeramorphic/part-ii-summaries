Rewrite rules.
- A rewrite rule is an element of $\Omega^\star \times \Omega^\star$, element $(\alpha,\beta)$ written $\alpha \to \beta$.
- A rewrite system is $(\Omega, P)$ where $P$ is a finite set of rewrite rules.
- There are only countably many rewrite systems on a finite set of symbols $\Omega$.
- $\sigma \xrightarrow R_1 \tau$ if $R$ produces $\tau$ from $\sigma$ in 1 step.
- $\xrightarrow R$ is the reflexive transitive closure of $\xrightarrow R_1$.
- $\mathcal D(R,\sigma)$ is the set of strings that can be derived from $\sigma$ using $R$.

Grammars.
- Let $\Sigma$ an alphabet, $V$ a set of variables, nonempty and disjoint. $\Omega = \Sigma \cup V$.
- $\mathbb W = \Sigma^\star \subseteq \Omega^\star$ is the set of words. $\mathbb W^+ = \mathbb W \setminus \{\varepsilon\}$.
- Use $a, b, c, \dots$ for $\Sigma$, $A, B, C, \dots$ for $V$, $u, v, w, \dots$ for $\mathbb W$.
- A subset of $\mathbb W$ is called a language.
- $(\Sigma, V, P, S)$ is a grammar if $R = (\Omega, P)$ is a rewrite system and $S \in V$ is the start symbol.
- $\mathcal L(G) = \mathcal D(G,S) \cap \mathbb W$ is the language generated by a grammar.

Equivalence.
- $G, G'$ are equivalent if $\mathcal L(G) = \mathcal L(G')$.
- Let $G, G'$ have the same $\Sigma$. Then $f \colon \Omega \to \Omega'$ is called an isomorphism if it is the identity on letters, maps the start symbol to the start symbol, is a bijection on variables, and induces a bijection on production rules.
- Isomorphic grammars are equivalent.
- The variable set doesn't matter, only its size (isomorphic to the set $n$, say).
- There are only countably many languages of the form $\mathcal L(G)$ for some $G$ on a fixed alphabet $\Sigma$.
- There are uncountably many languages $L \subseteq \mathcal P(\mathbb W)$.

Chomsky hierarchy. A production rule $\alpha \to \beta$ is:
- noncontracting if $|\alpha| \leq |\beta|$;
- context-sensitive if $\alpha = \gamma A \delta$ and $\beta = \gamma \eta \delta$ where $\eta \in \Omega^+$ (hence noncontracting);
- context-free if $\alpha = A$ and $|\beta| > 0$ (hence context-sensitive);
- regular if $\alpha = A$ and $\beta$ is either $a$ or $aB$ (hence context-free).
A language is
- type 0 if it has a grammar;
- type 1 if it has a context-sensitive grammar (iff it has a noncontracting grammar)
- type 2 if it has a context-free grammar;
- type 3 if it has a regular grammar.

Decision problems.
- Word problem: is $w \in \mathcal L(G)$?
- Emptiness problem: is $\mathcal L(G)$ empty?
- Equivalence problem: are $G$ and $G'$ equivalent?
We can solve the word problem for noncontracting grammars, because any $G$-derivation of a word of length $n$ has a derivation of length at most $\sum_{\ell = 1}^n |\Omega|^\ell$.

Closure.
- Concatenation grammar and union grammar. Could have more words than just the concatenation or union if $P$, $P'$ share variables, and they could even share letters which we can't change WLOG.
- Concatenation grammar on context-free grammars is context-free.
- Union grammar on regular languages is regular.
- Rules are variable-based if symbols in $\alpha$ are all variables. Context-free implies variable-based.
- Every grammar is equivalent to a variable-based grammar. Context-free, context-sensitive, noncontracting is preserved under the conversion. Regular is not.
- Convert to variable-based grammar before taking concatenation/union. All classes are closed under concatenation and union (regular + concatenation takes more work).

Noncontracting grammars can't produce the empty word. A rule is $S$-safe if it does not contain $S$ in $\beta$. A grammar is $\varepsilon$-adequate if all rules are $S$-safe. An $\varepsilon$-adequate language admits the rule $S \to \varepsilon$, converting the language into its union with $\{\varepsilon\}$.